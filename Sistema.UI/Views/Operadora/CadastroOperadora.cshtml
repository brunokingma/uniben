
@{
    ViewBag.Title = "Cadastro de Operadora";
}



<ol class="breadcrumb">
    <li><a href="/Home/Index">Principal</a></li>
    <li class="active">Cadastro operadora</li>
</ol>



<div class="container" style="margin-top:20px;">

    <div class="row">
        <div class="widget widget-gray">
            <!-- TYPE PANEL -->
            <div class="widget-head">
                <!-- HEAD PANEL -->
                <h4 class="heading"><i class="fa fa-archive"></i> Cadastro de operadora</h4>
            </div><!-- /HEAD PANEL -->

            <div class="widget-body" id="widget-body1">
                <!-- CONTENT PANEL -->

                <h4>Dados cadastrais</h4>
                <hr class="style4" />

                <form>

                    <div class="form-group col-md-3">
                        <label for="cnpj">CNPJ</label>
                        <input type="text" class="form-control cnpj" id="cnpj" maxlength="14" placeholder="CNPJ">
                    </div>

                    <div class="form-group col-md-4">
                        <label for="nome">Nome</label>
                        <input type="text" class="form-control" id="nome" placeholder="Nome">
                    </div>

                    <div class="form-group col-md-3">
                        <label for="fantasia">Nome Fantasia</label>
                        <input type="text" class="form-control" id="fantasia" placeholder="Nome Fantasia">
                    </div>

                    <div class="form-group col-md-2">
                        <label for="situacao">Situação</label>
                        <input type="text" class="form-control" id="situacao" placeholder="Situação">
                    </div>

                    <div class="form-group col-md-3">
                        <label for="telefone">Telefone</label>
                        <input type="text" class="form-control" id="telefone" maxlength="14" placeholder="Telefone">
                    </div>

                    <div class="form-group col-md-4">
                        <label for="email">Email</label>
                        <input type="text" class="form-control" id="email" placeholder="Email">
                    </div>

                    <div class="form-group col-md-3">
                        <label for="abertura">Abertura</label>
                        <input type="text" class="form-control" id="abertura" placeholder="Abertura">
                    </div>

                    <div class="form-group col-md-2">
                        <label for="natureza_juridica">Natureza jurídica</label>
                        <input type="text" class="form-control" id="natureza_juridica" placeholder="Natureza jurídica">
                    </div>

                    <div class="form-group col-md-10">
                        <label for="atividade_principal">Atividade principal</label>
                        <input type="text" class="form-control" id="atividade_principal" placeholder="Atividade principal">
                    </div>

                    <div class="form-group col-md-2">
                        <label for="code">Código</label>
                        <input type="text" class="form-control" id="code" placeholder="Code">
                    </div>


                    <h4>Endereço</h4>
                    <hr class="style4">

                    <div class="form-group col-md-3">
                        <label for="cep">CEP</label>
                        <input type="text" class="form-control cep" id="cep" placeholder="CEP">
                    </div>


                    <div class="form-group col-md-6">
                        <label for="rua">Rua</label>
                        <input type="text" class="form-control" id="rua" placeholder="Rua">
                    </div>

                    <div class="form-group col-md-3">
                        <label for="numero">Número</label>
                        <input type="text" class="form-control" id="numero" placeholder="Número">
                    </div>

                    <div class="form-group col-md-3">
                        <label for="complemento">Complemento</label>
                        <input type="text" class="form-control" id="complemento" placeholder="Complemento">
                    </div>
                    <div class="form-group col-md-3">
                        <label for="bairro">Bairro</label>
                        <input type="text" class="form-control" id="bairro" placeholder="Bairro">
                    </div>
                    <div class="form-group col-md-3">
                        <label for="cidade">Cidade</label>
                        <input type="text" class="form-control" id="cidade" placeholder="Cidade">
                    </div>
                    <div class="form-group col-md-3">
                        <label for="estado">Estado</label>
                        <select class="custom-select form-control decorated " id="estado">
                            <option selected>Escolha uma opção</option>
                            <option value="AC">Acre</option>
                            <option value="AL">Alagoas</option>
                            <option value="AM">Amazonas</option>
                            <option value="AP">Amapá</option>
                            <option value="BA">Bahia</option>
                            <option value="CE">Ceará</option>
                            <option value="DF">Distrito Federal</option>
                            <option value="ES">Espírito Santo</option>
                            <option value="GO">Goiás</option>
                            <option value="MA">Maranhão</option>
                            <option value="MT">Mato Grosso</option>
                            <option value="MS">Mato Grosso do Sul</option>
                            <option value="MG">Minas Gerais</option>
                            <option value="PA">Pará</option>
                            <option value="PB">Paraíba</option>
                            <option value="PR">Paraná</option>
                            <option value="PE">Pernambuco</option>
                            <option value="PI">Piauí</option>
                            <option value="RJ">Rio de Janeiro</option>
                            <option value="RN">Rio Grande do Norte</option>
                            <option value="RO">Rondônia</option>
                            <option value="RS">Rio Grande do Sul</option>
                            <option value="RR">Roraima</option>
                            <option value="SC">Santa Catarina</option>
                            <option value="SE">Sergipe</option>
                            <option value="SP">São Paulo</option>
                            <option value="TO">Tocantins</option>
                        </select>
                    </div>

                    <hr class="style4">

                    <div class="col-md-3 offset-md-8">
                        <button type="button" class="btn btn-primary btn-sm " data-toggle="modal" data-target="#modal">
                            Salvar cadastro
                        </button>
                    </div>

                </form>

                <span class="clear"></span>

            </div><!-- /CONTENT PANEL -->

            <div class="widget-footer">
                <!-- FOOTER PANEL-->
                <a href="#" id="toggle1" class="fa fa-chevron-up fa-1x" title=""><i></i></a>
            </div><!-- /FOOTER PANEL-->

        </div> <!-- /TYPE PANEL -->

    </div>
</div>



<!-- Como a navegação recarrega a pagina esse script tem que ser usada em cada view -->
@section Scripts {
    <script type="text/javascript">



        $('#cnpj').keyup(function () {

            var cnpj = $(this).val().replace(/[^a-z0-9]/gmi, "");

            if (cnpj.length == 14) {
                $.ajax({
                    method: "GET",
                    url: "/Operadora/RetornaCnpj/" + cnpj,
                    success: function (r) {

                        var retorno = JSON.parse(r);

                        if (retorno.status == "OK") {

                            var cep = retorno.cep;
                            cep = cep.replace(/[^a-z0-9]/gmi, "");

                            $("#rua").val(retorno.logradouro);
                            $("#bairro").val(retorno.bairro);
                            $("#cidade").val(retorno.municipio);
                            $("#estado").val(retorno.uf);
                            $("#complemento").val(retorno.complemento);
                            $("#fantasia").val(retorno.fantasia);
                            $("#numero").val(retorno.numero);
                            $("#cep").val(cep);
                            $("#abertura").val(retorno.abertura);
                            $("#situacao").val(retorno.situacao);
                            $("#telefone").val(retorno.telefone);
                            $("#email").val(retorno.email);
                            $("#nome").val(retorno.nome);
                            $("#natureza_juridica").val(retorno.natureza_juridica);
                            $("#atividade_principal").val(retorno.atividade_principal[0].text);
                            $("#code").val(retorno.atividade_principal[0].code);
                        
                        }
                    }
                });
            }

        });


        $('#produto').multiselect({
            buttonText: function (options, select) {
                return 'selecione uma opção de produto';
            },
            buttonTitle: function (options, select) {
                var labels = [];
                options.each(function () {
                    labels.push($(this).text());
                });

                $("#grupo").val(" ");

                $.each(labels, function (index, value) {
                    if (index == 0) {
                        $("#grupo").val($("#grupo").val() + value);
                    } else {
                        $("#grupo").val($("#grupo").val() + " - " + value);
                    }

                });

                return labels.join(' - ');
            }
        });

        $('.nav-pills li:eq(2) a').tab('show');
        $(".data").mask("99/99/9999", { placeholder: "dd/mm/yyyy" });
        $(".telefone").mask("(99) 9999-9999");
        $(".cpf").mask("999.999.999-99");
        $(".cep").mask("99999-999");
        $(".cnpj").mask("99.999.999/9999-99");
    </script>
}


